:root {
  --bg: #0f172a;
  --panel: #111827;
  --text: #e2e8f0;
  --muted: #94a3b8;
  --accent: #7c3aed;
  --border: #1f2937;
  --shadow: 0 10px 40px rgba(0,0,0,0.35);
}
[data-theme="light"] {
  --bg: #f8fafc;
  --panel: #ffffff;
  --text: #0f172a;
  --muted: #475569;
  --accent: #2563eb;
  --border: #e2e8f0;
  --shadow: 0 20px 40px rgba(15,23,42,0.12);
}
* { box-sizing: border-box; }
body {
  margin: 0; font-family: "Inter", system-ui, -apple-system, sans-serif;
  background: var(--bg); color: var(--text); min-height: 100vh;
}
.topbar {
  display:flex; justify-content:space-between; align-items:center;
  padding:14px 22px; position:sticky; top:0; z-index:10;
  background: var(--panel); box-shadow: var(--shadow);
}
.brand { font-weight:700; letter-spacing:0.5px; }
.actions { display:flex; gap:10px; align-items:center; }
button, select, input, textarea {
  font: inherit; color: var(--text); background: var(--panel);
  border:1px solid var(--border); border-radius:10px; padding:9px 12px;
}
button { cursor:pointer; transition: transform 120ms ease, box-shadow 120ms; }
button:hover { transform: translateY(-1px); box-shadow: var(--shadow); }
button:focus-visible { outline:2px solid var(--accent); outline-offset:2px; }
button.primary { background: var(--accent); color:#fff; border:none; }
button.ghost { background: transparent; }
.switch { position:relative; width:42px; height:24px; display:inline-block; }
.switch input { opacity:0; width:0; height:0; }
.switch span { position:absolute; cursor:pointer; inset:0; background:var(--border); border-radius:30px; transition:.2s; }
.switch span:before {
  position:absolute; content:""; height:18px; width:18px; left:3px; bottom:3px;
  background:#fff; border-radius:50%; transition:.2s;
}
.switch input:checked + span { background: var(--accent); }
.switch input:checked + span:before { transform: translateX(18px); }

.layout { display:grid; grid-template-columns: 2fr 1fr; gap:14px; padding:14px; }
@media (max-width: 960px) { .layout { grid-template-columns:1fr; } }

.board { overflow-x:auto; }
.columns { display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:12px; }
.column {
  background: var(--panel); border:1px solid var(--border); border-radius:14px;
  padding:12px; min-height:220px; display:flex; flex-direction:column; gap:10px;
}
.column header { display:flex; align-items:center; justify-content:space-between; }
.column header .dot { width:12px; height:12px; border-radius:50%; display:inline-block; margin-right:8px; }
.list { display:flex; flex-direction:column; gap:10px; min-height:100px; }
.card {
  background: rgba(255,255,255,0.02); border:1px solid var(--border); border-radius:12px;
  padding:12px; box-shadow: var(--shadow); transition: transform .15s, border-color .15s, background .15s;
}
.card:hover { transform: translateY(-1px); border-color: var(--accent); }
.card.dragging { opacity:0.6; }
.card .top { display:flex; justify-content:space-between; align-items:center; gap:8px; }
.badge { padding:4px 8px; border-radius:999px; font-size:12px; color:#fff; }
.badge.low { background:#22c55e; }
.badge.medium { background:#f59e0b; }
.badge.high { background:#ef4444; }
.desc { color: var(--muted); margin:6px 0; font-size:14px; }
.meta { display:flex; gap:8px; align-items:center; color:var(--muted); font-size:12px; flex-wrap:wrap; }
.checkbox {
  width:20px; height:20px; border-radius:6px; border:2px solid var(--border);
  display:inline-flex; align-items:center; justify-content:center; cursor:pointer;
  transition: background .15s, border-color .15s;
}
.checkbox.done { background: var(--accent); border-color: var(--accent); color:#fff; }
.checkbox:focus-visible { outline:2px solid var(--accent); outline-offset:3px; }

.sidebar .panel {
  background: var(--panel); border:1px solid var(--border); border-radius:14px;
  padding:12px; margin-bottom:12px; box-shadow: var(--shadow);
}
.progress-bars .bar { margin:10px 0; }
.progress-bars .track {
  background: var(--border); border-radius:10px; height:10px; overflow:hidden;
}
.progress-bars .fill { height:10px; border-radius:10px; background: var(--accent); width:40%; transition: width .3s; }
.progress-circle {
  width:90px; height:90px; border-radius:50%; border:7px solid var(--border);
  position:relative; display:grid; place-items:center; color:var(--muted);
}
.progress-circle::after {
  content: attr(data-value) "%"; position:absolute; font-weight:600; color:var(--text);
}
.stats { display:grid; grid-template-columns: repeat(auto-fit, minmax(120px,1fr)); gap:8px; }
.stat {
  padding:10px; border:1px solid var(--border); border-radius:12px;
  background: rgba(255,255,255,0.02);
}

.calendar { display:grid; grid-template-columns: repeat(7, 1fr); gap:6px; margin:10px 0; }
.calendar .cell {
  border:1px solid var(--border); border-radius:10px; min-height:72px; padding:6px;
  display:flex; flex-direction:column; gap:4px; cursor:pointer; background: rgba(255,255,255,0.02);
}
.calendar .cell.today { border-color: var(--accent); box-shadow:0 0 0 1px var(--accent); }
.calendar .dots { display:flex; gap:4px; flex-wrap:wrap; }
.dot-sm { width:8px; height:8px; border-radius:50%; }

.day-list { display:flex; flex-direction:column; gap:8px; }
.empty { color: var(--muted); font-style:italic; }

.modal-backdrop {
  position:fixed; inset:0; background:rgba(0,0,0,0.45); display:grid;
  place-items:center; padding:16px;
}
.modal-backdrop.hidden { display:none; }
.modal {
  background: var(--panel); color: var(--text); border-radius:14px; width:min(620px, 100%);
  border:1px solid var(--border); box-shadow: var(--shadow); max-height:90vh; overflow:auto;
}
.modal.small { width:min(420px,100%); }
.modal-header {
  display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--border);
}
.modal-body { padding:14px; display:flex; flex-direction:column; gap:12px; }
.modal-footer { display:flex; justify-content:flex-end; gap:10px; }

.grid-2 { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap:10px; }

.toast {
  position:fixed; bottom:16px; right:16px; background: var(--panel); color: var(--text);
  padding:12px 16px; border-radius:10px; border:1px solid var(--border); box-shadow: var(--shadow);
}
.toast.hidden { display:none; }
